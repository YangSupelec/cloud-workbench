# Do NOT modify this file. It is generated by BenchmarkSchedule.
# DSL for cron jobs: "Whenever is a Ruby gem that provides a clear syntax for writing and deploying cron jobs."
# Docs: https://github.com/javan/whenever

set :environment, '<%= Rails.env %>'
# TODO: fetch from appconfig instead of hardcoding
set :output, '<%= "#{Rails.root}/log/benchmark_schedule.log" %>'

# Create cron job for each active schedule with the Whenever DSL
<% BenchmarkSchedule.actives.each do |active_schedule| %>
  every '<%= active_schedule.cron_expression %>' do
    # TODO: remove debug command
    # command 'echo <%= active_schedule.benchmark_definition.name %>: `date`'
    runner "BenchmarkDefinition.start_execution_async_for_id(<%= active_schedule.benchmark_definition_id %>)"
  end
<% end %>